$schema: "http://json-schema.org/draft-04/schema#"

id: "measurement"
title: Measurement
type: object
nodeTerms: null
namespace: https://imaging-hub.data-commons.org
category: clinical
program: '*'
project: '*'
description: Records of Measurements, i.e. structured values (numerical or categorical) obtained through systematic and standardized examination or testing of a subject's sample. The measurement table contains both orders and results of measurements as laboratory tests, vital signs, quantitative findings from pathology reports, etc. Measurements differ from Observations in that they require a standardized test or some other activity to generate a quantitative or qualitative result.
additionalProperties: false
submittable: true
validators: null

systemProperties:
  - id
  - project_id
  - state
  - created_datetime
  - updated_datetime

links:
  - name: subjects
    backref: measurements
    label: related_to
    target_type: subject
    multiplicity: many_to_one
    required: true

required:
  - submitter_id
  - type

uniqueKeys:
  - [id]
  - [project_id, submitter_id]

properties:

  $ref: "_definitions.yaml#/ubiquitous_properties"

  days_to_measurement:
    description: The difference in days between the subject's index_date and the date of the measurement. Used to de-identify the measurement date.
    type: integer

  measurement_concept_id:
      description: A foreign key to the standard measurement concept identifier in the Standardized Vocabularies.
      type: string

  measurement_source_concept_id:
      description: A foreign key to a Concept in the Standard Vocabularies that refers to the code used in the source.
      type: string

  measurement_source_value:
      description: The Measurement name as it appears in the source data. This code is mapped to a Standard Concept in the Standardized Vocabularies and the original code is stored here for reference.
      type: string

  measurement_type_concept_id:
      description: A foreign key to the predefined Concept in the Standardized Vocabularies reflecting the provenance from where the Measurement record was recorded.
      type: string

  operator_concept_id:
      description: A foreign key identifier to the predefined Concept in the Standardized Vocabularies reflecting the mathematical operator that is applied to the value_as_number. Operators are <, ≤, =, ≥, >.
      type: string

  provider_id:
      description: A foreign key to the provider in the PROVIDER table who was responsible for initiating or obtaining the measurement.
      type: string

  range_high:
      description: The upper limit of the normal range of the Measurement. The upper range is assumed to be of the same unit of measure as the Measurement value.
      type: string

  range_low:
      description: The lower limit of the normal range of the Measurement result. The lower range is assumed to be of the same unit of measure as the Measurement value.
      type: string

  site_id:
    description: The care site ID. 
    type: string

  unit_concept_id:
      description: A foreign key to a Standard Concept ID of Measurement Units in the Standardized Vocabularies.
      type: string

  unit_source_value:
      description: The source code for the unit as it appears in the source data. This code is mapped to a standard unit concept in the Standardized Vocabularies and the original code is stored here for reference.
      type: string

  value_as_number:
      description: A Measurement result where the result is expressed as a numeric value.
      type: number

  value_as_concept_id:
      description: A foreign key to a Measurement result represented as a Concept from the Standardized Vocabularies (e.g., positive/negative, present/absent, low/high, etc.).
      type: string

  value_source_value:
      description: The source value associated with the content of the value_as_number or value_as_concept_id as stored in the source data.
      type: string

  visit_id:
    description: A foreign key to the visit in the VISIT table during which the device was used.
    type: string

  subjects:
    description: The submitter_id or id of the subject this measurement describes, i.e., a link to a record in the parent node.
    $ref: "_definitions.yaml#/to_one"


