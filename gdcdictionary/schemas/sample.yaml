$schema: "http://json-schema.org/draft-04/schema#"

id: "sample"
title: Sample
type: object
namespace: https://imaging-hub.data-commons.org
category: biospecimen
program: '*'
project: '*'
description: >
  Any material sample taken from a biological entity for testing, diagnostic, propagation, treatment
  or research purposes, including a sample obtained from a living organism or taken from the
  biological object after halting of all its life functions. Biospecimen can contain one or more
  components including but not limited to cellular molecules, cells, tissues, organs, body fluids,
  embryos, and body excretory products.
additionalProperties: false
submittable: true
validators: null

systemProperties:
  - id
  - project_id
  - state
  - created_datetime
  - updated_datetime

required:
  - type
  - submitter_id
  - subjects

uniqueKeys:
  - [id]
  - [project_id, submitter_id]

links:
  - name: subjects
    backref: samples
    label: derived_from
    target_type: subject
    multiplicity: many_to_one
    required: true

properties:
  $ref: "_definitions.yaml#/ubiquitous_properties"

  # autolysis_score:
  #   description: >
  #     Autolysis Score
  #   enum:
  #     - None
  #     - Mild
  #     - Moderate
  #     - Severe

  biospecimen_anatomic_site:
    term:
      $ref: "_terms.yaml#/biospecimen_anatomic_site"
    type: string

  # biospecimen_anatomic_site_detail:
  #   description: >
  #     Tissue type, more specific detail of tissue tyep
  #   type: string

  # biospecimen_anatomic_site_uberon_id:
  #   description: >
  #     Uberon ID, anatomical location as described by the Uber Anatomy Ontology (UBERON)
  #   type: string

  # biospecimen_anatomic_site_uberon_term:
  #   description: >
  #     Uberon Term, anatomical location as described by the Uber Anatomy Ontology (UBERON)
  #   type: string

  # biospecimen_physical_site:
  #   description: >
  #     Tissue location
  #   type: string

  biospecimen_type:
    description: >
      Original material type of the collected sample
    type: string

  composition:
    term:
      $ref: "_terms.yaml#/composition"
    type: string

  # collection_kit:
  #   description: >
  #     Category or classifier of a set of responses, indicates the color of the sample collection kit
  #   enum:
  #     - "Aqua Kit:Organ and Tissue donation"
  #     - "Green Kit: Brain donation"
  #     - "Yellow Kit: Skin and Blood donation"

  collection_site:
    description: >
      Code for BSS collection site. Indicates the site that enrolled the donor, 
      brain subregions may have more than one site. 
    type: string

  # current_weight:
  #   term:
  #     $ref: "_terms.yaml#/current_weight"
  #   type: number

  # hours_to_collection:
  #   description: >
  #     Total Ischemic time for a sample
  #   type: integer

  # hours_to_sample_procurement:
  #   description: >
  #     Time a sample spent in the PAXgene fixative
  #   type: integer

  # freezing_method:
  #   term:
  #     $ref: "_terms.yaml#/freezing_method"
  #   type: string

  # internal_notes:
  #   description: >
  #     Internal notes about the sample generated by the LDACC
  #   type: string

  # is_ffpe:
  #   term:
  #     $ref: "_terms.yaml#/is_ffpe"
  #   type: boolean

  # method_of_sample_procurement:
  #   term:
  #     $ref: "_terms.yaml#/method_of_sample_procurement"
  #   type: string

  # oct_embedded:
  #   term:
  #     $ref: "_terms.yaml#/oct_embedded"
  #   type: string

  # pathology_notes:
  #   description: >
  #     Pathology Notes, notes from PRC Report
  #   type: string

  # preservation_method:
  #   term:
  #     $ref: "_terms.yaml#/preservation_method"
  #   type: string

  # prosector_notes:
  #   description: >
  #     Prosector comments
  #   type: string

  # sample_type:
  #   description: >
  #     Current material type of the sample as stored at the LDACC
  #   enum:
  #     - PAXgene Preserved tissue
  #     - Fresh frozen tissue
  #     - Whole blood
  #     - PAXgene Preserved whole blood
  #     - Pellet frozen cells
  #     - DNA genomic
  #     - Fresh skin punch

  tissue_type:
    term:
      $ref: "_terms.yaml#/tissue_type"
    enum:
      - Tumor
      - Normal
      - Abnormal
      - Peritumoral
      - Contrived
      - Unknown
      - Not Reported
      - Not Allowed To Collect

  specimen_id:
    description: >
      Unique identifier that can be used to retrieve more information for a specimen.
    type: string

  subjects:
    $ref: "_definitions.yaml#/to_one"
